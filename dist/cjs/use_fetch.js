"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./core.js");exports.UseFetch=class{#e;constructor(e={}){this.#e=e}#t=new Map;get request_interceptors(){return[...this.#t.keys()]}#r=new Map;get response_interceptors(){return[...this.#r.keys()]}add_request_interceptor(e,t){this.#t.set(e,t)}remove_request_interceptor(e){this.#t.delete(e)}clear_request_interceptor(){this.#t.clear()}add_response_interceptor(e,t){this.#r.set(e,t)}remove_response_interceptor(e){this.#r.delete(e)}clear_response_interceptor(){this.#r.clear()}#s=new Map;get scopes(){return[...this.#s.keys()]}cancel_scope(e,t=""){this.#s.get(e)?.abort(t),this.#s.delete(e)}cancel_scopes(...e){e.forEach((e=>{this.cancel_scope(e)}))}cancel_all(){this.#s.forEach((e=>{e.abort()})),this.#s.clear()}static isCancel=e=>e instanceof DOMException&&"AbortError"===e.name;isCancel=e=>e instanceof DOMException&&"AbortError"===e.name;entry_or_insert(e){return this.#s.has(e)||this.#s.set(e,new AbortController),this.#s.get(e)}common_fetch(e,t,r,s){const o=this.entry_or_insert(t);return s&&this.#t.forEach((e=>{e.fn(s)})),new Promise(((t,c)=>{fetch(r,{...s??this.#e,method:e,signal:o.signal}).then((e=>{this.#r.forEach((t=>{t.fulfill(e)})),t(e)})).catch((e=>{this.#r.forEach((t=>{t.reject(e)})),c(e)}))}))}get(e,t,r){return this.common_fetch("GET",e,t,r)}get_retry(t,r,s,o){return e.do_retry_task(r,this.common_fetch,["GET",t,s,o],this.isCancel)}post(e,t,r){return this.common_fetch("POST",e,t,r)}post_retry(t,r,s,o){return e.do_retry_task(r,this.common_fetch,["POST",t,s,o],this.isCancel)}delete(e,t,r){return this.common_fetch("DELETE",e,t,r)}delete_retry(t,r,s,o){return e.do_retry_task(r,this.common_fetch,["DELETE",t,s,o],this.isCancel)}put(e,t,r){return this.common_fetch("PUT",e,t,r)}put_retry(t,r,s,o){return e.do_retry_task(r,this.common_fetch,["PUT",t,s,o],this.isCancel)}};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidXNlX2ZldGNoLmpzIiwic291cmNlcyI6WyIuLi8uLi8uLi9saWIvdXNlX2ZldGNoLnRzIl0sInNvdXJjZXNDb250ZW50IjpbbnVsbF0sIm5hbWVzIjpbImdsb2JhbF9jb25maWciLCJjb25zdHJ1Y3RvciIsInRoaXMiLCJyZXF1ZXN0X2ludGVyY2VwdG9ycyIsIk1hcCIsImtleXMiLCJyZXNwb25zZV9pbnRlcmNlcHRvcnMiLCJhZGRfcmVxdWVzdF9pbnRlcmNlcHRvciIsIm5hbWUiLCJpbnRlcmNlcHRvciIsInNldCIsInJlbW92ZV9yZXF1ZXN0X2ludGVyY2VwdG9yIiwiZGVsZXRlIiwiY2xlYXJfcmVxdWVzdF9pbnRlcmNlcHRvciIsImNsZWFyIiwiYWRkX3Jlc3BvbnNlX2ludGVyY2VwdG9yIiwicmVtb3ZlX3Jlc3BvbnNlX2ludGVyY2VwdG9yIiwiY2xlYXJfcmVzcG9uc2VfaW50ZXJjZXB0b3IiLCJzY29wZXMiLCJjYW5jZWxfc2NvcGUiLCJzY29wZSIsIm1lc3NhZ2UiLCJnZXQiLCJhYm9ydCIsImNhbmNlbF9zY29wZXMiLCJmb3JFYWNoIiwiY2FuY2VsX2FsbCIsImNhbmNlbGxlciIsInN0YXRpYyIsImVyciIsIkRPTUV4Y2VwdGlvbiIsImlzQ2FuY2VsIiwiZW50cnlfb3JfaW5zZXJ0IiwiaGFzIiwiQWJvcnRDb250cm9sbGVyIiwiY29tbW9uX2ZldGNoIiwicmVxdWVzdF90eXBlIiwidXJsIiwiY29uZmlnIiwidG9rZW5fZm9yX3Njb3BlIiwiZm4iLCJQcm9taXNlIiwicmVzb2x2ZSIsInJlamVjdCIsImZldGNoIiwibWV0aG9kIiwic2lnbmFsIiwidGhlbiIsInJlcyIsImZ1bGZpbGwiLCJjYXRjaCIsImdldF9yZXRyeSIsInJldHJ5IiwiZG9fcmV0cnlfdGFzayIsInBvc3QiLCJwb3N0X3JldHJ5IiwiZGVsZXRlX3JldHJ5IiwicHV0IiwicHV0X3JldHJ5Il0sIm1hcHBpbmdzIjoiZ0hBV0EsTUFJSUEsR0FFQUMsWUFBWUQsRUFBd0QsSUFDaEVF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
