"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./core.js");exports.UseFetch=class{#e;constructor(e={}){this.#e=e}#t=new Map;get request_interceptors(){return[...this.#t.keys()]}#r=new Map;get response_interceptors(){return[...this.#r.keys()]}add_request_interceptor(e,t){this.#t.set(e,t)}remove_request_interceptor(e){this.#t.delete(e)}clear_request_interceptor(){this.#t.clear()}add_response_interceptor(e,t){this.#r.set(e,t)}remove_response_interceptor(e){this.#r.delete(e)}clear_response_interceptor(){this.#r.clear()}#s=new Map;get scopes(){return[...this.#s.keys()]}cancel_scope(e,t=""){this.#s.get(e)?.abort(t),this.#s.delete(e)}cancel_scopes(...e){e.forEach((e=>{this.cancel_scope(e)}))}cancel_all(){this.#s.forEach((e=>{e.abort()})),this.#s.clear()}static isCancel=e=>e instanceof DOMException&&"AbortError"===e.name;isCancel=e=>e instanceof DOMException&&"AbortError"===e.name;entry_or_insert(e){return this.#s.has(e)||this.#s.set(e,new AbortController),this.#s.get(e)}common_fetch(e,t,r,s){const o=this.entry_or_insert(t);return s&&this.#t.forEach((e=>{e.fn(s)})),new Promise(((t,c)=>{fetch(r,{...s??this.#e,method:e,signal:o.signal}).then((e=>{this.#r.forEach((t=>{t.fulfill(e)})),t(e)})).catch((e=>{this.#r.forEach((t=>{t.reject(e)})),c(e)}))}))}get(e,t,r){return this.common_fetch("GET",e,t,r)}get_retry(t,r,s,o){return e.do_retry_task(r,this.common_fetch,["GET",t,s,o],this.isCancel)}post(e,t,r){return this.common_fetch("POST",e,t,r)}post_retry(t,r,s,o){return e.do_retry_task(r,this.common_fetch,["POST",t,s,o],this.isCancel)}delete(e,t,r){return this.common_fetch("DELETE",e,t,r)}delete_retry(t,r,s,o){return e.do_retry_task(r,this.common_fetch,["DELETE",t,s,o],this.isCancel)}put(e,t,r){return this.common_fetch("PUT",e,t,r)}put_retry(t,r,s,o){return e.do_retry_task(r,this.common_fetch,["PUT",t,s,o],this.isCancel)}head(e,t,r){return this.common_fetch("HEAD",e,t,r)}head_retry(t,r,s,o){return e.do_retry_task(r,this.common_fetch,["HEAD",t,s,o],this.isCancel)}connect(e,t,r){return this.common_fetch("CONNECT",e,t,r)}connect_retry(t,r,s,o){return e.do_retry_task(r,this.common_fetch,["CONNECT",t,s,o],this.isCancel)}options(e,t,r){return this.common_fetch("OPTIONS",e,t,r)}options_retry(t,r,s,o){return e.do_retry_task(r,this.common_fetch,["OPTIONS",t,s,o],this.isCancel)}trace(e,t,r){return this.common_fetch("TRACE",e,t,r)}trace_retry(t,r,s,o){return e.do_retry_task(r,this.common_fetch,["TRACE",t,s,o],this.isCancel)}patch(e,t,r){return this.common_fetch("PATCH",e,t,r)}patch_retry(t,r,s,o){return e.do_retry_task(r,this.common_fetch,["PATCH",t,s,o],this.isCancel)}};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidXNlX2ZldGNoLmpzIiwic291cmNlcyI6WyIuLi8uLi8uLi9saWIvdXNlX2ZldGNoLnRzIl0sInNvdXJjZXNDb250ZW50IjpbbnVsbF0sIm5hbWVzIjpbImdsb2JhbF9jb25maWciLCJjb25zdHJ1Y3RvciIsInRoaXMiLCJyZXF1ZXN0X2ludGVyY2VwdG9ycyIsIk1hcCIsImtleXMiLCJyZXNwb25zZV9pbnRlcmNlcHRvcnMiLCJhZGRfcmVxdWVzdF9pbnRlcmNlcHRvciIsIm5hbWUiLCJpbnRlcmNlcHRvciIsInNldCIsInJlbW92ZV9yZXF1ZXN0X2ludGVyY2VwdG9yIiwiZGVsZXRlIiwiY2xlYXJfcmVxdWVzdF9pbnRlcmNlcHRvciIsImNsZWFyIiwiYWRkX3Jlc3BvbnNlX2ludGVyY2VwdG9yIiwicmVtb3ZlX3Jlc3BvbnNlX2ludGVyY2VwdG9yIiwiY2xlYXJfcmVzcG9uc2VfaW50ZXJjZXB0b3IiLCJzY29wZXMiLCJjYW5jZWxfc2NvcGUiLCJzY29wZSIsIm1lc3NhZ2UiLCJnZXQiLCJhYm9ydCIsImNhbmNlbF9zY29wZXMiLCJmb3JFYWNoIiwiY2FuY2VsX2FsbCIsImNhbmNlbGxlciIsInN0YXRpYyIsImVyciIsIkRPTUV4Y2VwdGlvbiIsImlzQ2FuY2VsIiwiZW50cnlfb3JfaW5zZXJ0IiwiaGFzIiwiQWJvcnRDb250cm9sbGVyIiwiY29tbW9uX2ZldGNoIiwicmVxdWVzdF90eXBlIiwidXJsIiwiY29uZmlnIiwidG9rZW5fZm9yX3Njb3BlIiwiZm4iLCJQcm9taXNlIiwicmVzb2x2ZSIsInJlamVjdCIsImZldGNoIiwibWV0aG9kIiwic2lnbmFsIiwidGhlbiIsInJlcyIsImZ1bGZpbGwiLCJjYXRjaCIsImdldF9yZXRyeSIsInJldHJ5IiwiZG9fcmV0cnlfdGFzayIsInBvc3QiLCJwb3N0X3JldHJ5IiwiZGVsZXRlX3JldHJ5IiwicHV0IiwicHV0X3JldHJ5IiwiaGVhZCIsImhlYWRfcmV0cnkiLCJjb25uZWN0IiwiY29ubmVjdF9yZXRyeSIsIm9wdGlvbnMiLCJvcHRpb25zX3JldHJ5IiwidHJhY2UiLCJ0cmFjZV9yZXRyeSIsInBhdGNoIiwicGF0Y2hfcmV0cnkiXSwibWFwcGluZ3MiOiJnSEFVQSxNQUlJQSxHQUVBQyxZQUFZRCxFQUF3RCxJQUNoRUUsTUFBS0YsRUFBaUJBLEVBTTFCRyxHQUF3QixJQUFJQyxJQUl4QkQsMkJBQ0EsTUFBTyxJQUFLRCxNQUFLQyxFQUFzQkUsUUFNM0NDLEdBQXlCLElBQUlGLElBSXpCRSw0QkFDQSxNQUFPLElBQUtKLE1BQUtJLEVBQXVCRCxRQVE1Q0Usd0JBQXdCQyxFQUFjQyxHQUNsQ1AsTUFBS0MsRUFBc0JPLElBQUlGLEVBQU1DLEdBT3pDRSwyQkFBMkJILEdBQ3ZCTixNQUFLQyxFQUFzQlMsT0FBT0osR0FNdENLLDRCQUNJWCxNQUFLQyxFQUFzQlcsUUFRL0JDLHlCQUF5QlAsRUFBY0MsR0FDbkNQLE1BQUtJLEVBQXVCSSxJQUFJRixFQUFNQyxHQU8xQ08sNEJBQTRCUixHQUN4Qk4sTUFBS0ksRUFBdUJNLE9BQU9KLEdBTXZDUyw2QkFDSWYsTUFBS0ksRUFBdUJRLFFBTXZCSSxHQUFVLElBQUlkLElBSW5CYyxhQUNBLE1BQU8sSUFBS2hCLE1BQUtnQixFQUFRYixRQU03QmMsYUFBYUMsRUFBZUMsRUFBa0IsSUFDMUNuQixNQUFLZ0IsRUFBUUksSUFBSUYsSUFBUUcsTUFBTUYsR0FDL0JuQixNQUFLZ0IsRUFBUU4sT0FBT1EsR0FNeEJJLGlCQUFpQk4sR0FDYkEsRUFBT08sU0FBUUwsSUFDWGxCLEtBQUtpQixhQUFhQyxNQU8xQk0sYUFDSXhCLE1BQUtnQixFQUFRTyxTQUFRRSxJQUNqQkEsRUFBVUosV0FFZHJCLE1BQUtnQixFQUFRSixRQU1qQmMsZ0JBQW1CQyxHQUNSQSxhQUFlQyxjQUE2QixlQUFiRCxFQUFJckIsS0FLdkN1QixTQUFZRixHQUNSQSxhQUFlQyxjQUE2QixlQUFiRCxFQUFJckIsS0FNdEN3QixnQkFBZ0JaLEdBS3BCLE9BSElsQixNQUFLZ0IsRUFBUWUsSUFBSWIsSUFBUWxCLE1BQUtn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
