import{do_retry_task as e}from"./core.js";class t{#e;constructor(e={}){this.#e=e}#t=new Map;get request_interceptors(){return[...this.#t.keys()]}#r=new Map;get response_interceptors(){return[...this.#r.keys()]}add_request_interceptor(e,t){this.#t.set(e,t)}remove_request_interceptor(e){this.#t.delete(e)}clear_request_interceptor(){this.#t.clear()}add_response_interceptor(e,t){this.#r.set(e,t)}remove_response_interceptor(e){this.#r.delete(e)}clear_response_interceptor(){this.#r.clear()}#s=new Map;get scopes(){return[...this.#s.keys()]}cancel_scope(e,t=""){this.#s.get(e)?.abort(t),this.#s.delete(e)}cancel_scopes(...e){e.forEach((e=>{this.cancel_scope(e)}))}cancel_all(){this.#s.forEach((e=>{e.abort()})),this.#s.clear()}static isCancel=e=>e instanceof DOMException&&"AbortError"===e.name;isCancel=e=>e instanceof DOMException&&"AbortError"===e.name;entry_or_insert(e){return this.#s.has(e)||this.#s.set(e,new AbortController),this.#s.get(e)}common_fetch(e,t,r,s){const o=this.entry_or_insert(t);return s&&this.#t.forEach((e=>{e.fn(s)})),new Promise(((t,c)=>{fetch(r,{...s??this.#e,method:e,signal:o.signal}).then((e=>{this.#r.forEach((t=>{t.fulfill(e)})),t(e)})).catch((e=>{this.#r.forEach((t=>{t.reject(e)})),c(e)}))}))}get(e,t,r){return this.common_fetch("GET",e,t,r)}get_retry(t,r,s,o){return e(r,this.common_fetch,["GET",t,s,o],this.isCancel)}post(e,t,r){return this.common_fetch("POST",e,t,r)}post_retry(t,r,s,o){return e(r,this.common_fetch,["POST",t,s,o],this.isCancel)}delete(e,t,r){return this.common_fetch("DELETE",e,t,r)}delete_retry(t,r,s,o){return e(r,this.common_fetch,["DELETE",t,s,o],this.isCancel)}put(e,t,r){return this.common_fetch("PUT",e,t,r)}put_retry(t,r,s,o){return e(r,this.common_fetch,["PUT",t,s,o],this.isCancel)}head(e,t,r){return this.common_fetch("HEAD",e,t,r)}head_retry(t,r,s,o){return e(r,this.common_fetch,["HEAD",t,s,o],this.isCancel)}connect(e,t,r){return this.common_fetch("CONNECT",e,t,r)}connect_retry(t,r,s,o){return e(r,this.common_fetch,["CONNECT",t,s,o],this.isCancel)}options(e,t,r){return this.common_fetch("OPTIONS",e,t,r)}options_retry(t,r,s,o){return e(r,this.common_fetch,["OPTIONS",t,s,o],this.isCancel)}trace(e,t,r){return this.common_fetch("TRACE",e,t,r)}trace_retry(t,r,s,o){return e(r,this.common_fetch,["TRACE",t,s,o],this.isCancel)}patch(e,t,r){return this.common_fetch("PATCH",e,t,r)}patch_retry(t,r,s,o){return e(r,this.common_fetch,["PATCH",t,s,o],this.isCancel)}}export{t as UseFetch};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidXNlX2ZldGNoLmpzIiwic291cmNlcyI6WyIuLi8uLi8uLi9saWIvdXNlX2ZldGNoLnRzIl0sInNvdXJjZXNDb250ZW50IjpbbnVsbF0sIm5hbWVzIjpbIlVzZUZldGNoIiwiZ2xvYmFsX2NvbmZpZyIsImNvbnN0cnVjdG9yIiwidGhpcyIsInJlcXVlc3RfaW50ZXJjZXB0b3JzIiwiTWFwIiwia2V5cyIsInJlc3BvbnNlX2ludGVyY2VwdG9ycyIsImFkZF9yZXF1ZXN0X2ludGVyY2VwdG9yIiwibmFtZSIsImludGVyY2VwdG9yIiwic2V0IiwicmVtb3ZlX3JlcXVlc3RfaW50ZXJjZXB0b3IiLCJkZWxldGUiLCJjbGVhcl9yZXF1ZXN0X2ludGVyY2VwdG9yIiwiY2xlYXIiLCJhZGRfcmVzcG9uc2VfaW50ZXJjZXB0b3IiLCJyZW1vdmVfcmVzcG9uc2VfaW50ZXJjZXB0b3IiLCJjbGVhcl9yZXNwb25zZV9pbnRlcmNlcHRvciIsInNjb3BlcyIsImNhbmNlbF9zY29wZSIsInNjb3BlIiwibWVzc2FnZSIsImdldCIsImFib3J0IiwiY2FuY2VsX3Njb3BlcyIsImZvckVhY2giLCJjYW5jZWxfYWxsIiwiY2FuY2VsbGVyIiwic3RhdGljIiwiZXJyIiwiRE9NRXhjZXB0aW9uIiwiaXNDYW5jZWwiLCJlbnRyeV9vcl9pbnNlcnQiLCJoYXMiLCJBYm9ydENvbnRyb2xsZXIiLCJjb21tb25fZmV0Y2giLCJyZXF1ZXN0X3R5cGUiLCJ1cmwiLCJjb25maWciLCJ0b2tlbl9mb3Jfc2NvcGUiLCJmbiIsIlByb21pc2UiLCJyZXNvbHZlIiwicmVqZWN0IiwiZmV0Y2giLCJtZXRob2QiLCJzaWduYWwiLCJ0aGVuIiwicmVzIiwiZnVsZmlsbCIsImNhdGNoIiwiZ2V0X3JldHJ5IiwicmV0cnkiLCJkb19yZXRyeV90YXNrIiwicG9zdCIsInBvc3RfcmV0cnkiLCJkZWxldGVfcmV0cnkiLCJwdXQiLCJwdXRfcmV0cnkiLCJoZWFkIiwiaGVhZF9yZXRyeSIsImNvbm5lY3QiLCJjb25uZWN0X3JldHJ5Iiwib3B0aW9ucyIsIm9wdGlvbnNfcmV0cnkiLCJ0cmFjZSIsInRyYWNlX3JldHJ5IiwicGF0Y2giLCJwYXRjaF9yZXRyeSJdLCJtYXBwaW5ncyI6IjBDQVVBLE1BQU1BLEVBSUZDLEdBRUFDLFlBQVlELEVBQXdELElBQ2hFRSxNQUFLRixFQUFpQkEsRUFNMUJHLEdBQXdCLElBQUlDLElBSXhCRCwyQkFDQSxNQUFPLElBQUtELE1BQUtDLEVBQXNCRSxRQU0zQ0MsR0FBeUIsSUFBSUYsSUFJekJFLDRCQUNBLE1BQU8sSUFBS0osTUFBS0ksRUFBdUJELFFBUTVDRSx3QkFBd0JDLEVBQWNDLEdBQ2xDUCxNQUFLQyxFQUFzQk8sSUFBSUYsRUFBTUMsR0FPekNFLDJCQUEyQkgsR0FDdkJOLE1BQUtDLEVBQXNCUyxPQUFPSixHQU10Q0ssNEJBQ0lYLE1BQUtDLEVBQXNCVyxRQVEvQkMseUJBQXlCUCxFQUFjQyxHQUNuQ1AsTUFBS0ksRUFBdUJJLElBQUlGLEVBQU1DLEdBTzFDTyw0QkFBNEJSLEdBQ3hCTixNQUFLSSxFQUF1Qk0sT0FBT0osR0FNdkNTLDZCQUNJZixNQUFLSSxFQUF1QlEsUUFNdkJJLEdBQVUsSUFBSWQsSUFJbkJjLGFBQ0EsTUFBTyxJQUFLaEIsTUFBS2dCLEVBQVFiLFFBTTdCYyxhQUFhQyxFQUFlQyxFQUFrQixJQUMxQ25CLE1BQUtnQixFQUFRSSxJQUFJRixJQUFRRyxNQUFNRixHQUMvQm5CLE1BQUtnQixFQUFRTixPQUFPUSxHQU14QkksaUJBQWlCTixHQUNiQSxFQUFPTyxTQUFRTCxJQUNYbEIsS0FBS2lCLGFBQWFDLE1BTzFCTSxhQUNJeEIsTUFBS2dCLEVBQVFPLFNBQVFFLElBQ2pCQSxFQUFVSixXQUVkckIsTUFBS2dCLEVBQVFKLFFBTWpCYyxnQkFBbUJDLEdBQ1JBLGFBQWVDLGNBQTZCLGVBQWJELEVBQUlyQixLQUt2Q3VCLFNBQVlGLEdBQ1JBLGFBQWVDLGNBQTZCLGVBQWJELEVBQUlyQixLQU10Q3dCLGdCQUFnQlosR0FLcEIsT0FISWxCLE1BQUtnQixFQUFRZSxJ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
