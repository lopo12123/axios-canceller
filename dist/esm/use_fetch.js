import{do_retry_task as e}from"./core.js";class t{#e;constructor(e={}){this.#e=e}#t=new Map;get request_interceptors(){return[...this.#t.keys()]}#r=new Map;get response_interceptors(){return[...this.#r.keys()]}add_request_interceptor(e,t){this.#t.set(e,t)}remove_request_interceptor(e){this.#t.delete(e)}clear_request_interceptor(){this.#t.clear()}add_response_interceptor(e,t){this.#r.set(e,t)}remove_response_interceptor(e){this.#r.delete(e)}clear_response_interceptor(){this.#r.clear()}#s=new Map;get scopes(){return[...this.#s.keys()]}cancel_scope(e,t=""){this.#s.get(e)?.abort(t),this.#s.delete(e)}cancel_scopes(...e){e.forEach((e=>{this.cancel_scope(e)}))}cancel_all(){this.#s.forEach((e=>{e.abort()})),this.#s.clear()}static isCancel=e=>e instanceof DOMException&&"AbortError"===e.name;isCancel=e=>e instanceof DOMException&&"AbortError"===e.name;entry_or_insert(e){return this.#s.has(e)||this.#s.set(e,new AbortController),this.#s.get(e)}common_fetch(e,t,r,s){const o=this.entry_or_insert(t);return s&&this.#t.forEach((e=>{e.fn(s)})),new Promise(((t,c)=>{fetch(r,{...s??this.#e,method:e,signal:o.signal}).then((e=>{this.#r.forEach((t=>{t.fulfill(e)})),t(e)})).catch((e=>{this.#r.forEach((t=>{t.reject(e)})),c(e)}))}))}get(e,t,r){return this.common_fetch("GET",e,t,r)}get_retry(t,r,s,o){return e(r,this.common_fetch,["GET",t,s,o],this.isCancel)}post(e,t,r){return this.common_fetch("POST",e,t,r)}post_retry(t,r,s,o){return e(r,this.common_fetch,["POST",t,s,o],this.isCancel)}delete(e,t,r){return this.common_fetch("DELETE",e,t,r)}delete_retry(t,r,s,o){return e(r,this.common_fetch,["DELETE",t,s,o],this.isCancel)}put(e,t,r){return this.common_fetch("PUT",e,t,r)}put_retry(t,r,s,o){return e(r,this.common_fetch,["PUT",t,s,o],this.isCancel)}}export{t as UseFetch};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidXNlX2ZldGNoLmpzIiwic291cmNlcyI6WyIuLi8uLi8uLi9saWIvdXNlX2ZldGNoLnRzIl0sInNvdXJjZXNDb250ZW50IjpbbnVsbF0sIm5hbWVzIjpbIlVzZUZldGNoIiwiZ2xvYmFsX2NvbmZpZyIsImNvbnN0cnVjdG9yIiwidGhpcyIsInJlcXVlc3RfaW50ZXJjZXB0b3JzIiwiTWFwIiwia2V5cyIsInJlc3BvbnNlX2ludGVyY2VwdG9ycyIsImFkZF9yZXF1ZXN0X2ludGVyY2VwdG9yIiwibmFtZSIsImludGVyY2VwdG9yIiwic2V0IiwicmVtb3ZlX3JlcXVlc3RfaW50ZXJjZXB0b3IiLCJkZWxldGUiLCJjbGVhcl9yZXF1ZXN0X2ludGVyY2VwdG9yIiwiY2xlYXIiLCJhZGRfcmVzcG9uc2VfaW50ZXJjZXB0b3IiLCJyZW1vdmVfcmVzcG9uc2VfaW50ZXJjZXB0b3IiLCJjbGVhcl9yZXNwb25zZV9pbnRlcmNlcHRvciIsInNjb3BlcyIsImNhbmNlbF9zY29wZSIsInNjb3BlIiwibWVzc2FnZSIsImdldCIsImFib3J0IiwiY2FuY2VsX3Njb3BlcyIsImZvckVhY2giLCJjYW5jZWxfYWxsIiwiY2FuY2VsbGVyIiwic3RhdGljIiwiZXJyIiwiRE9NRXhjZXB0aW9uIiwiaXNDYW5jZWwiLCJlbnRyeV9vcl9pbnNlcnQiLCJoYXMiLCJBYm9ydENvbnRyb2xsZXIiLCJjb21tb25fZmV0Y2giLCJyZXF1ZXN0X3R5cGUiLCJ1cmwiLCJjb25maWciLCJ0b2tlbl9mb3Jfc2NvcGUiLCJmbiIsIlByb21pc2UiLCJyZXNvbHZlIiwicmVqZWN0IiwiZmV0Y2giLCJtZXRob2QiLCJzaWduYWwiLCJ0aGVuIiwicmVzIiwiZnVsZmlsbCIsImNhdGNoIiwiZ2V0X3JldHJ5IiwicmV0cnkiLCJkb19yZXRyeV90YXNrIiwicG9zdCIsInBvc3RfcmV0cnkiLCJkZWxldGVfcmV0cnkiLCJwdXQiLCJwdXRfcmV0cnkiXSwibWFwcGluZ3MiOiIwQ0FXQSxNQUFNQSxFQUlGQyxHQUVBQyxZ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
