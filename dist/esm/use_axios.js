import e from"axios";import{do_retry_task as t}from"./core.js";class s{#e;constructor(e={}){this.#e=e}#t=new Map;get request_interceptors(){return[...this.#t.keys()]}#s=new Map;get response_interceptors(){return[...this.#s.keys()]}add_request_interceptor(e,t){this.#t.set(e,t)}remove_request_interceptor(e){this.#t.delete(e)}clear_request_interceptor(){this.#t.clear()}add_response_interceptor(e,t){this.#s.set(e,t)}remove_response_interceptor(e){this.#s.delete(e)}clear_response_interceptor(){this.#s.clear()}#r=new Map;get scopes(){return[...this.#r.keys()]}cancel_scope(e,t=""){this.#r.get(e)?.abort(t),this.#r.delete(e)}cancel_scopes(...e){e.forEach((e=>{this.cancel_scope(e)}))}cancel_all(){this.#r.forEach((e=>{e.abort()})),this.#r.clear()}static isCancel=t=>e.isCancel(t)||t instanceof DOMException&&"AbortError"===t.name;isCancel=t=>e.isCancel(t)||t instanceof DOMException&&"AbortError"===t.name;entry_or_insert(e){return this.#r.has(e)||this.#r.set(e,new AbortController),this.#r.get(e)}get(t,s,r){const o=this.entry_or_insert(t);return r&&this.#t.forEach((e=>{e.fn(r)})),new Promise(((t,n)=>{e.get(s,{...r??this.#e,signal:o.signal}).then((e=>{this.#s.forEach((t=>{t.fulfill(e)})),t(e)})).catch((e=>{this.#s.forEach((t=>{t.reject(e)})),n(e)}))}))}get_retry(e,s,r,o){return t(s,this.get,[e,r,o],this.isCancel)}post(t,s,r,o){const n=this.entry_or_insert(t);return o&&this.#t.forEach((e=>{e.fn(o)})),new Promise(((t,i)=>{e.post(s,r,{...o??this.#e,signal:n.signal}).then((e=>{this.#s.forEach((t=>{t.fulfill(e)})),t(e)})).catch((e=>{this.#s.forEach((t=>{t.reject(e)})),i(e)}))}))}post_retry(e,s,r,o,n){return t(s,this.post,[e,r,o,n],this.isCancel)}delete(t,s,r){const o=this.entry_or_insert(t);return r&&this.#t.forEach((e=>{e.fn(r)})),new Promise(((t,n)=>{e.delete(s,{...r??this.#e,signal:o.signal}).then((e=>{this.#s.forEach((t=>{t.fulfill(e)})),t(e)})).catch((e=>{this.#s.forEach((t=>{t.reject(e)})),n(e)}))}))}delete_retry(e,s,r,o){return t(s,this.delete,[e,r,o],this.isCancel)}put(t,s,r,o){const n=this.entry_or_insert(t);return o&&this.#t.forEach((e=>{e.fn(o)})),new Promise(((t,i)=>{e.put(s,r,{...o??this.#e,signal:n.signal}).then((e=>{this.#s.forEach((t=>{t.fulfill(e)})),t(e)})).catch((e=>{this.#s.forEach((t=>{t.reject(e)})),i(e)}))}))}put_retry(e,s,r,o,n){return t(s,this.put,[e,r,o,n],this.isCancel)}}export{s as UseAxios};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidXNlX2F4aW9zLmpzIiwic291cmNlcyI6WyIuLi8uLi8uLi9saWIvdXNlX2F4aW9zLnRzIl0sInNvdXJjZXNDb250ZW50IjpbbnVsbF0sIm5hbWVzIjpbIlVzZUF4aW9zIiwiZ2xvYmFsX2NvbmZpZyIsImNvbnN0cnVjdG9yIiwidGhpcyIsInJlcXVlc3RfaW50ZXJjZXB0b3JzIiwiTWFwIiwia2V5cyIsInJlc3BvbnNlX2ludGVyY2VwdG9ycyIsImFkZF9yZXF1ZXN0X2ludGVyY2VwdG9yIiwibmFtZSIsImludGVyY2VwdG9yIiwic2V0IiwicmVtb3ZlX3JlcXVlc3RfaW50ZXJjZXB0b3IiLCJkZWxldGUiLCJjbGVhcl9yZXF1ZXN0X2ludGVyY2VwdG9yIiwiY2xlYXIiLCJhZGRfcmVzcG9uc2VfaW50ZXJjZXB0b3IiLCJyZW1vdmVfcmVzcG9uc2VfaW50ZXJjZXB0b3IiLCJjbGVhcl9yZXNwb25zZV9pbnRlcmNlcHRvciIsInNjb3BlcyIsImNhbmNlbF9zY29wZSIsInNjb3BlIiwibWVzc2FnZSIsImdldCIsImFib3J0IiwiY2FuY2VsX3Njb3BlcyIsImZvckVhY2giLCJjYW5jZWxfYWxsIiwiY2FuY2VsbGVyIiwic3RhdGljIiwiZXJyIiwiYXhpb3MiLCJpc0NhbmNlbCIsIkRPTUV4Y2VwdGlvbiIsImVudHJ5X29yX2luc2VydCIsImhhcyIsIkFib3J0Q29udHJvbGxlciIsInVybCIsImNvbmZpZyIsInRva2VuX2Zvcl9zY29wZSIsImZuIiwiUHJvbWlzZSIsInJlc29sdmUiLCJyZWplY3QiLCJzaWduYWwiLCJ0aGVuIiwicmVzIiwiZnVsZmlsbCIsImNhdGNoIiwiZ2V0X3JldHJ5IiwicmV0cnkiLCJkb19yZXRyeV90YXNrIiwicG9zdCIsImRhdGEiLCJwb3N0X3JldHJ5IiwiZGVsZXRlX3JldHJ5IiwicHV0IiwicHV0X3JldHJ5Il0sIm1hcHBpbmdzIjoiK0RBV0EsTUFBTUEsRUFJT0MsR0FFVEMsWUFBWUQsRUFBb0QsSUFDNURFLE1BQUtGLEVBQWlCQSxF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
